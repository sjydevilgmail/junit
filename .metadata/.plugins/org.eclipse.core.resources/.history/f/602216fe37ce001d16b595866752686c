package hello;

import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.Test;

@ExtendWith(MockitoExtension.class)
@RunWith(JUnitPlatform.class)
class MyHandlerTest {
    @Mock
    RoutingContext event;

    @Mock
    HttpServerRequest request;

    @Mock
    HttpServerResponse response;

   @BeforeEach
   public void setup(){
     doReturn(this.request).when(this.event).getRequest();
     doReturn(this.response).when(this.event)this.event.response();
  }

    @Test
    public void shouldSetStatusTo200whenNoError() {
        // arrange
        doReturn(SOME_VALID_BODY).when(this.request).getBody();
        // act
        new MyHandler().handle(this.event);
        // assert
        Mockito.verify(this.response).setStatusCode(200);
    }
}