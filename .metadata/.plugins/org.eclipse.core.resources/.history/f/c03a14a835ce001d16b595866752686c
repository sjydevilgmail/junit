package hello;

import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.Test;

@ExtendWith(MockitoExtension.class)
@RunWith(JUnitPlatform.class)
class MyHandlerTest {
   @Mock
   RoutingContext event;

   @Mock
   HttpServerRequest request;

   @Mock
   HttpServerResponse response;

   @BeforeEach
   public void setup(){
     doReturn(request).when(event).getRequest();
     doReturn(response).when(event)event.response();
  }

  @Test
  public void shouldSetStatusTo200whenNoError(){
    // arrange
    doReturn(SOME_VALID_BODY).when(request).getBody();
    // act
    new MyHandler().handle(event);
    // assert
    Mockito.verify(response).setStatusCode(200);
  }
}